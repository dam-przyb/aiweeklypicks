---
interface Props {
  code?: string;
  message?: string;
  actionHref?: string;
  actionLabel?: string;
  // Backward compatibility with old prop names
  errorCode?: string;
  errorMessage?: string;
}

const {
  code,
  message,
  actionHref = "/",
  actionLabel = "Go to home",
  errorCode,
  errorMessage,
} = Astro.props;

// Support both old and new prop names (old props take precedence for backward compatibility)
const displayCode = errorCode ?? code;
const displayMessage = errorMessage ?? message ?? "An error occurred.";
---

<div role="alert" class="bg-red-50 border-l-4 border-red-600 rounded-lg p-4 mb-6 shadow-sm">
  <div class="flex items-start gap-3">
    <div class="flex-shrink-0">
      <svg class="w-6 h-6 text-red-600" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
        <path
          fill-rule="evenodd"
          d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z"
          clip-rule="evenodd"></path>
      </svg>
    </div>
    <div class="flex-1 min-w-0">
      {displayCode && <h3 class="text-sm font-semibold text-red-900 mb-1">Error {displayCode}</h3>}
      {!displayCode && <h3 class="text-sm font-semibold text-red-900 mb-1">Error</h3>}
      <p class="text-sm text-red-800 leading-relaxed">{displayMessage}</p>
    </div>
    <a
      href={actionHref}
      class="flex-shrink-0 text-sm font-medium text-red-700 hover:text-red-900 underline focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600 rounded transition-colors"
      aria-label={actionLabel}
    >
      {actionLabel}
    </a>
  </div>
</div>
